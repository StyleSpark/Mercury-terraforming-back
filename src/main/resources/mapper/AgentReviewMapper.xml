<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.matdongsan.api.mapper.AgentReviewMapper">

    <select id="existsByUserByAgent" resultType="boolean">
        SELECT EXISTS (
            SELECT 1
            FROM agent_reviews
            WHERE user_id = #{userId}
            AND agent_id = #{agentId}
        )
    </select>

    <insert id="insertAgentReview">
        INSERT INTO agent_reviews (
            agent_id
            ,user_id
            ,content
            ,rate
            ,created_at
        )
        VALUES (
            #{agentId}
            ,#{userId}
            ,#{request.content}
            ,#{request.rate}
            ,NOW()
        )
    </insert>

</mapper>